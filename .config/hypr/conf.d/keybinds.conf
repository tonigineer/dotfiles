binds {
    # ============================================================
    # GLOBAL / DESKTOP CONTROL
    # ============================================================

    # Reload Hyprland config
    bind = SUPER_SHIFT, R, exec, hyprctl reload
    bind = CTRL_ALT, R, exec, pkill qs; qs -c noctalia-shell

    # Window state toggles
    bind = SUPER, F, togglefloating
    bind = SUPER, M, fullscreen
    bind = SUPER, P, pin

    # Swap workspace to passive monitor
    # - there must be a more elegant way?
    bind = ALT, TAB, exec, \
        passive_monitor="$(hyprctl monitors -j | jq '.[] | select(.focused == false).id')"; \
        active_ws="$(hyprctl activeworkspace | grep ID | cut -d" " -f3 | head -n 1)"; \
        hyprctl dispatch moveworkspacetomonitor $active_ws $passive_monitor; \
        hyprctl dispatch focusmonitor $passive_monitor; \
        hyprctl dispatch workspace $active_ws

    # Kill active window
    bind = SUPER_SHIFT, C, killactive


    # ============================================================
    # APPLICATION LAUNCHERS
    # ============================================================

    # Terminal
    bind = SUPER, RETURN, exec, kitty

    # File managers
    bind = SUPER, E, exec, thunar ~
    bind = SUPER_SHIFT, E, exec, kitty -e yazi ~

    # Matrix background
    bind = CTRL_ALT, M, exec, pkill cmatrix || kitty +kitten panel \
        --edge=background -o font_size=12 cmatrix -a -b -u 2 -r


    # ============================================================
    # SHORTCUTS / UTILITIES
    # ============================================================
    $PLAYER_SETTINGS = [noinitialfocus; float; size monitor_w*0.35 monitor_h*0.35; move monitor_w*0.60 monitor_h*0.05; monitor 1; pin]
    $KITTY_SETTINGS = [float; size monitor_w*0.35 monitor_h*0.35; move monitor_w*0.60 monitor_h*0.05; monitor 1; pin]

    # Start updating
    bind = CTRL_ALT, U, exec, $KITTY_SETTINGS \
        kitty -o font_size=10 -e bash -lc 'yay -Syu || { \
        code=$?; echo; echo "yay failed (exit $code)"; \
        read -n1 -r -p "Press any key to close..."; }'

    # Cast currently playing media URL to mpv
    bind = CTRL_ALT, Y, exec, $PLAYER_SETTINGS \
        url=$(playerctl -p firefox metadata xesam:url); \
        start=$(playerctl -p firefox position); \
        playerctl -p firefox stop; \
        mpv --start=$start $url

    # Run netflix as app
    bind = CTRL_ALT, N, exec, $KITTY_SETTINGS \
        brave --ozone-platform=wayland --app=https://www.netflix.com/browse

    # Streaming
    bind = SUPER, F9, exec, $PLAYER_SETTINGS printf '%s\n' \
        'Das Erste | https://daserste-live.ard-mcdn.de/daserste/live/hls/de/master.m3u8' \
        'ZDF       | https://zdf-hls-15.akamaized.net/hls/live/2016498/de/high/master.m3u8' \
        'Phoenix   | https://zdf-hls-19.akamaized.net/hls/live/2016502/de/high/master.m3u8' \
        | walker -d 'Select stream' --minheight 3 \
        | cut -d'|' -f2- \
        | xargs -r sh -lc 'mpv "$1"' sh

    # Zoom toggle
    bind = SUPER_SHIFT, Z, exec, hyprctl dispatch submap reset; \
        hypr-zoom -duration=250 -steps=150 -easing=OutBack -easingOut=InBack -interp=Linear

    # Lock screen
    bind = CTRL_ALT, L, exec, hyprlock

    # Preview SDDM greeter
    bind = CTRL_ALT, G, exec, sddm-greeter-qt6 --test-mode \
        --theme /usr/share/sddm/themes/sddm-astronaut-theme/ 2>/dev/null &

    # Screenshots (Hyprshot)
    $SCREENSHOT_DIR = ~/Pictures/Screenshots

    bind = , PRINT, exec, hyprshot -m output -m active -z -o $SCREENSHOT_DIR
    bind = SHIFT, PRINT, exec, hyprshot -m window -z -o $SCREENSHOT_DIR
    bind = SUPER_SHIFT, S, exec, hyprshot -m region -z -o $SCREENSHOT_DIR
    bind = CTRL_ALT, S, exec, ~/.config/hypr/scripts/capture.sh

    # Get color code (Hyprpicker)
    bind = SUPER_SHIFT, P, exec, hyprpicker -a

    # Gamemode toggle
    bind = SUPER, F1, exec, ~/.config/hypr/scripts/gamemode.sh

    # hyprlang if HYPR_X13GEN5
    unbind = , PRINT
    # hyprlang endif


    # ============================================================
    # LAYOUT
    # ============================================================

    # Resize with mouse
    bindm = SUPER, mouse:272, movewindow
    bindm = SUPER, mouse:273, resizewindow

    # Zoom with mouse wheel
    bind = SUPER, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor \
        $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
    bind = SUPER, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor \
        $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')
    bind = SUPER, mouse:274, exec, hyprctl -q keyword cursor:zoom_factor 1

    # Move between windows
    bind = SUPER, H, movefocus, l
    bind = SUPER, L, movefocus, r
    bind = SUPER, K, movefocus, u
    bind = SUPER, J, movefocus, d

    # Resize windows
    $INCREMENT = 50
    bind = SUPER_SHIFT, l, resizeactive, $INCREMENT 0
    bind = SUPER_SHIFT, h, resizeactive, -$INCREMENT 0
    bind = SUPER_SHIFT, k, resizeactive, 0 -$INCREMENT
    bind = SUPER_SHIFT, j, resizeactive, 0 $INCREMENT

    # Layout control - Master
    bind = SUPER, O, layoutmsg, swapwithmaster master


    # hyprlang if HYPR_SCROLLING
        unbind = SUPER, H
        unbind = SUPER, L
        unbind = SUPER, K
        unbind = SUPER, J

        # Move through windows (does not jump workspaces)
        bind = SUPER, H, layoutmsg, move -col
        bind = SUPER, L, layoutmsg, move +col

        # Move window in workspace
        bind = SUPER, comma, layoutmsg, movewindowto l
        bind = SUPER, period, layoutmsg, movewindowto r

        unbind = SUPER_SHIFT, l
        unbind = SUPER_SHIFT, h
        unbind = SUPER_SHIFT, k
        unbind = SUPER_SHIFT, j

        # Resize windows
        bind = SUPER_SHIFT, L, layoutmsg, colresize +0.333
        bind = SUPER_SHIFT, H, layoutmsg, colresize -0.333
    # hyprlang endif


    # ============================================================
    # WORKSPACES
    # ============================================================

    # Switch to workspaces 1–6
    bind = SUPER, 1, workspace, 1
    bind = SUPER, 2, workspace, 2
    bind = SUPER, 3, workspace, 3
    bind = SUPER, 4, workspace, 4
    bind = SUPER, 5, workspace, 5
    bind = SUPER, 6, workspace, 6
    bind = SUPER, grave, togglespecialworkspace

    # Move to workspace 1–6
    bind = SUPER_SHIFT, 1, movetoworkspace, 1
    bind = SUPER_SHIFT, 2, movetoworkspace, 2
    bind = SUPER_SHIFT, 3, movetoworkspace, 3
    bind = SUPER_SHIFT, 4, movetoworkspace, 4
    bind = SUPER_SHIFT, 5, movetoworkspace, 5
    bind = SUPER_SHIFT, 6, movetoworkspace, 6
    bind = SUPER_SHIFT, grave, movetoworkspacesilent, special

    # Scroll through workspaces
    # bind = SUPER, mouse_down, workspace, e+1
    # bind = SUPER, mouse_up, workspace, e-1


    # ============================================================
    # MEDIA / AUDIO / BRIGHTNESS
    # ============================================================

    # Media transport (playerctl)
    bindl  = , XF86AudioNext, exec, playerctl next
    bindl  = , XF86AudioPause, exec, playerctl play-pause
    bindl  = , XF86AudioPlay, exec, playerctl play-pause
    bindl  = , XF86AudioPrev, exec, playerctl previous

    # Volume & mic (wpctl / PipeWire)
    bindle = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 2%+
    bindle = ,XF86AudioLowerVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 2%-
    bindl  = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
    bindl  = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

    # Brightness (brightnessctl)
    binde  = ,XF86MonBrightnessUp,   exec, brightnessctl set +5%
    binde  = ,XF86MonBrightnessDown, exec, brightnessctl set 5%-


    # ============================================================
    # QUICKSELL SESSIONS (CONDITIONAL)
    # ============================================================


    # hyprlang if HYPR_NOCTALIA

    # Unbind potential conflicts
    unbind = SUPER, R
    unbind = SUPER, S
    unbind = SUPER_SHIFT, Q
    unbind = CTRL_ALT, L
    unbind = ,XF86MonBrightnessUp
    unbind = ,XF86MonBrightnessDown

    bind = CTRL_ALT, L, exec, qs -c noctalia-shell ipc call lockScreen lock

    # NOCTALIA drawers / actions (qs IPC)
    bind = SUPER, R, exec, qs -c noctalia-shell ipc call launcher toggle
    bind = SUPER, S, exec, qs -c noctalia-shell ipc call controlCenter toggle
    bind = SUPER_SHIFT, Q, exec, qs -c noctalia-shell ipc call sessionMenu toggle
    # Override brightness keys to use NOCTALIA IPC

    binde = ,XF86MonBrightnessUp, exec, qs -c noctalia-shell ipc call brightness increase
    binde = ,XF86MonBrightnessDown, exec, qs -c noctalia-shell ipc call brightness decrease

    # hyprlang endif


    # hyprlang if HYPR_CAELESTIA

    # Unbind potential conflicts
    unbind = SUPER, R
    unbind = SUPER, D
    unbind = SUPER, S
    unbind = SUPER_SHIFT, Q
    unbind = CTRL_ALT, L
    # unbind = SUPER, F1

    # CAELESTIA drawers / actions (caelestia CLI)
    bind = SUPER, R, exec, caelestia shell drawers toggle launcher
    bind = SUPER, D, exec, caelestia shell drawers toggle dashboard
    bind = SUPER, S, exec, caelestia shell drawers toggle sidebar
    bind = SUPER_SHIFT, Q, exec, caelestia shell drawers toggle session

    bind = CTRL_ALT, L, exec, caelestia shell lock lock
    # bind = SUPER, F1, exec, caelestia shell gameMode toggle

    # hyprlang endif
}
